\chapter{Writeback Unit}
\label{Writeback Unit}
Writeback Unit is the fifth stage of the pipeline and it is composed by three different multiplexers, controlled, using SEL signals, by three different bits of the control word sent by the CU.
\begin{enumerate} 
    \item First one takes as inputs the output of the alu pipeline register and the output of the dram pipeline register. This mux is used to choose between a value obtained
    from the DRAM with controlwordbit1='1' (load instruction) or from the ALU with controlword1='0'.
    \item The second takes as inputs the output of the first multiplexer and the output of the NPC3 pipeline register. In this case , it is used to choose which value must be saved
    in the register file, NPC3 with controlwordbit2='1' in case of jal instruction or the value from the previous mux controlword2='0'.
    \item Last one is linked to the second mux because it chooses 31 as value when it is a jal and so the value of NPC3 must be stored in r31 with controlword3='1', in the other cases
    the value of the address destination pipeline register with controlwordbit3='0';
\end{enumerate}